<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ARC Character</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      overflow: hidden;
    }

    body {
      width: 120px;
      height: 120px;
      background: transparent;
      -webkit-app-region: drag;
      cursor: pointer;
    }

    #character {
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* ARCキャラクター（シンプルな円形ベース） */
    .arc-character {
      position: relative;
      width: 80px;
      height: 80px;
    }

    /* 体（円） */
    .body {
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%);
      border-radius: 50%;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      animation: breathe 3s ease-in-out infinite;
    }

    /* 目 */
    .eyes {
      position: absolute;
      top: 28px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 20px;
    }

    .eye {
      width: 10px;
      height: 12px;
      background: white;
      border-radius: 50%;
      position: relative;
      animation: blink 4s infinite;
    }

    .pupil {
      width: 6px;
      height: 6px;
      background: #333;
      border-radius: 50%;
      position: absolute;
      top: 3px;
      left: 2px;
    }

    /* 口 */
    .mouth {
      position: absolute;
      top: 50px;
      left: 50%;
      transform: translateX(-50%);
      width: 30px;
      height: 15px;
      border: 2px solid white;
      border-top: none;
      border-radius: 0 0 30px 30px;
    }

    /* アニメーション: 呼吸 */
    @keyframes breathe {
      0%, 100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.05);
      }
    }

    /* アニメーション: まばたき */
    @keyframes blink {
      0%, 96%, 100% {
        height: 12px;
      }
      98% {
        height: 2px;
      }
    }

    /* ホバーエフェクト */
    .arc-character:hover .body {
      background: linear-gradient(135deg, #5BA3FF 0%, #4A90E2 100%);
      box-shadow: 0 6px 16px rgba(74, 144, 226, 0.4);
    }

    /* 通知時のキラキラ */
    .sparkle {
      position: absolute;
      width: 8px;
      height: 8px;
      background: #FFD700;
      border-radius: 50%;
      animation: sparkle-anim 1.5s ease-in-out infinite;
    }

    .sparkle:nth-child(1) { top: 5px; left: 10px; animation-delay: 0s; }
    .sparkle:nth-child(2) { top: 10px; right: 8px; animation-delay: 0.3s; }
    .sparkle:nth-child(3) { bottom: 15px; left: 15px; animation-delay: 0.6s; }

    @keyframes sparkle-anim {
      0%, 100% { 
        opacity: 0;
        transform: scale(0);
      }
      50% { 
        opacity: 1;
        transform: scale(1.5);
      }
    }
  </style>
</head>
<body>
  <div id="character">
    <div class="arc-character">
      <div class="body"></div>
      <div class="eyes">
        <div class="eye">
          <div class="pupil"></div>
        </div>
        <div class="eye">
          <div class="pupil"></div>
        </div>
      </div>
      <div class="mouth"></div>
      <!-- キラキラエフェクト（通知時に表示） -->
      <div class="sparkles" style="display: none;">
        <div class="sparkle"></div>
        <div class="sparkle"></div>
        <div class="sparkle"></div>
      </div>
    </div>
  </div>

  <script>
    const { ipcRenderer } = require('electron');

    // クリックイベント
    document.body.addEventListener('click', () => {
      ipcRenderer.send('character-clicked');
    });

    // 通知受信時のエフェクト
    ipcRenderer.on('show-sparkle', () => {
      const sparkles = document.querySelector('.sparkles');
      sparkles.style.display = 'block';
      setTimeout(() => {
        sparkles.style.display = 'none';
      }, 2000);
    });

    // 時刻に応じた表情変化（オプション）
    function updateExpression() {
      const hour = new Date().getHours();
      const mouth = document.querySelector('.mouth');

      if (hour >= 22 || hour < 6) {
        // 深夜は眠そうな表情
        mouth.style.borderRadius = '30px 30px 0 0';
        mouth.style.borderTop = '2px solid white';
        mouth.style.borderBottom = 'none';
      } else {
        // 通常の笑顔
        mouth.style.borderRadius = '0 0 30px 30px';
        mouth.style.borderTop = 'none';
        mouth.style.borderBottom = '2px solid white';
      }
    }

    updateExpression();
    setInterval(updateExpression, 60000); // 1分ごとに更新
  </script>
</body>
</html>

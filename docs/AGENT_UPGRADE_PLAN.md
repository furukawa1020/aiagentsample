# ARCを真のエージェントにする改善計画

## 現状分析: ARCは「準エージェント」

### エージェントの定義
1. **自律性** - 自分で判断し行動する
2. **反応性** - 環境変化に即座に対応
3. **プロアクティブ** - 自ら目標に向かって行動
4. **社会性** - 他のシステム・人間と協調

### ARCの現状
- ✅ 反応性: ユーザー入力に反応する
- ⚠️ 自律性: 危機検知のみ自動、他は手動
- ❌ プロアクティブ: 全部メニュー待ち
- ❌ 社会性: 外部システム連携なし

---

## 🔧 真のエージェント化改善案

### Phase 2.5: エージェント化強化

#### 1. **バックグラウンド常駐** ⭐ 最重要
```javascript
// 常駐プロセスとして動作
// - 定期的に状態をチェック
// - 時刻を見て自発的に行動
// - ユーザーが開いてなくても動く
```

**実装内容**:
- デーモンプロセス化
- タスクスケジューラー統合（Windows）
- システムトレイ常駐UI

#### 2. **時間認識と自発的行動**
```javascript
// 毎朝9:00に自動で
if (時刻 === "09:00" && !今日の問い表示済み) {
  通知を表示("今日の問いがあります");
  問いを提示();
}

// 深夜に体調未記録なら
if (時刻 === "22:00" && !今日の体調記録) {
  通知を表示("今日の体調を記録しませんか？");
}

// 3日間断片記録なしなら
if (最終記録から3日経過) {
  通知を表示("最近、考え事はありますか？");
}
```

#### 3. **コンテキスト認識**
```javascript
// 曜日・時間帯で行動変化
if (曜日 === "月曜日" && 時刻 === "08:00") {
  週次レビューを自動実行();
  今週の核テーマを提示();
}

// 締め切り接近を自動検知
if (締め切りまで3日 && 未着手) {
  警告通知("締め切りが近づいています");
  最小アクションを提案();
}
```

#### 4. **目標指向行動**
```javascript
// ユーザーの目標を理解して分解
目標: "論文を書く"
↓ ARCが自動分解
1. 核テーマを確認 → 完了
2. 背景セクションドラフト生成 → 実行中
3. ユーザーに確認依頼 → 待機
4. 次のセクション生成 → 保留
```

#### 5. **マルチモーダル入力**
```javascript
// 音声入力対応
"今日は本当にしんどい" (音声)
→ 自動でテキスト化
→ 危機検知
→ 即座に介入

// ファイル監視
研究フォルダに新しいPDFが追加
→ 自動で概念抽出を提案
```

#### 6. **外部連携（Phase 3の前倒し）**
```javascript
// カレンダー連携
Googleカレンダーから締め切り取得
→ 自動でタスク化
→ リマインド設定

// メール監視
重要メールを検知
→ 返信ドラフト生成
→ 確認依頼
```

---

## 🚀 実装優先順位

### High Priority (今すぐ)
1. **スケジューラー実装** - 定期実行を実際に動かす
2. **バックグラウンド常駐** - 閉じても動き続ける
3. **プッシュ通知** - 自分から話しかける

### Medium Priority (Phase 3と並行)
4. **コンテキスト認識** - 時間・状況で判断
5. **目標分解エンジン** - タスクを自動分解
6. **音声入力** - ハンズフリー記録

### Low Priority (将来)
7. **外部連携** - カレンダー・メール
8. **マルチデバイス** - スマホ・PCで同期

---

## 📋 具体的実装タスク

### Task 1: スケジューラー実装（2時間）
- [ ] `src/scheduler/jobs.js` 実装
- [ ] 朝の問いリマインド (9:00)
- [ ] 夜の体調確認 (22:00)
- [ ] テーマ更新 (毎晩23:00)

### Task 2: 通知システム（1時間）
- [ ] Windows通知API統合
- [ ] 通知クリックでUI起動
- [ ] 通知履歴記録

### Task 3: バックグラウンド化（3時間）
- [ ] デーモンプロセス化
- [ ] システムトレイアイコン
- [ ] 自動起動設定

### Task 4: コンテキストエンジン（2時間）
- [ ] 時刻判定ロジック
- [ ] 曜日判定ロジック
- [ ] 最終行動からの経過時間計算

---

## 💡 エージェント化の本質

現在のARCは「高機能なアプリ」。
真のエージェントは:

```
アプリ: ユーザーが呼んだら答える
　　　　↓
エージェント: 常にそばにいて、
              必要な時に自分から話しかける
```

これは「技術的実装」だけでなく、
**「関係性の設計」**の問題。

---

## 🎯 次のアクション

### Option A: Phase 2.5（エージェント化）を先にやる
→ **推奨**。これがないと本当の意味でARCじゃない

### Option B: Phase 3を先に完成させてから戻る
→ 機能は揃うが、受動的なまま

### Option C: 両方並行
→ 開発が複雑になるリスク

---

**どうしますか？エージェント化を今やりますか？**
